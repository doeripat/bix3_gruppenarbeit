[Ivy]
[>Created: Thu Dec 10 16:46:18 CET 2015]
1506BE0531520C0C 3.17 #module
>Proto >Proto Collection #zClass
En0 Entscheid_faellen Big #zClass
En0 B #cInfo
En0 #process
Bk2 BpmnServiceTask Big #zClass
Bk2 B #cInfo
Bk3 BpmnUserTask Big #zClass
Bk3 B #cInfo
Bk5 BpmnServiceTask Big #zClass
Bk5 B #cInfo
Bk1 BpmnSendTask Big #zClass
Bk1 BpmnSendTask #cInfo
Bk0 BpmnUserTask Big #zClass
Bk0 BpmnUserTask #cInfo
En0 @TextInP .resExport .resExport #zField
En0 @TextInP .type .type #zField
En0 @TextInP .processKind .processKind #zField
En0 @AnnotationInP-0n ai ai #zField
En0 @MessageFlowInP-0n messageIn messageIn #zField
En0 @MessageFlowOutP-0n messageOut messageOut #zField
En0 @TextInP .xml .xml #zField
En0 @TextInP .responsibility .responsibility #zField
En0 @EndSub f1 '' #zField
En0 @TaskSwitch f13 '' #zField
En0 @PushWFArc f7 '' #zField
En0 @PushWFArc f9 '' #zField
En0 Bk2 S21 'Sub 2' #zField
En0 Bk3 S11 'Sub 1' #zField
En0 Bk5 S41 'Sub 4' #zField
En0 @Alternative f2 '' #zField
En0 @PushWFArc f5 '' #zField
En0 Bk1 S30 'Send 3' #zField
En0 Bk0 U10 'User 1' #zField
En0 @PushWFArc f3 '' #zField
En0 @TaskSwitch f17 '' #zField
En0 @PushWFArc f8 '' #zField
En0 @PushWFArc f12 '' #zField
En0 @TkArc f4 '' #zField
En0 @StartSub f0 '' #zField
En0 @TkArc f11 '' #zField
En0 @Alternative f15 '' #zField
En0 @PushWFArc f16 '' #zField
En0 @PushWFArc f6 '' #zField
En0 @PushWFArc f10 '' #zField
>Proto En0 En0 Entscheid_faellen #zField
Bk2 @TextInP .resExport .resExport #zField
Bk2 @TextInP .type .type #zField
Bk2 @TextInP .processKind .processKind #zField
Bk2 @AnnotationInP-0n ai ai #zField
Bk2 @MessageFlowInP-0n messageIn messageIn #zField
Bk2 @MessageFlowOutP-0n messageOut messageOut #zField
Bk2 @TextInP .xml .xml #zField
Bk2 @TextInP .responsibility .responsibility #zField
Bk2 @Alternative f15 '' #zField
Bk2 @GridStep f22 '' #zField
Bk2 @GridStep f7 '' #zField
Bk2 @PushWFArc f23 '' #zField
Bk2 @PushWFArc f21 '' #zField
Bk2 @GridStep f17 '' #zField
Bk2 @PushWFArc f10 '' #zField
Bk2 @PushTrueWFInG-01 g0 '' #zField
Bk2 @PushWFArc f0 '' #zField
Bk2 @PushTrueWFOutG-01 g1 '' #zField
Bk2 @PushWFArc f3 '' #zField
Bk2 @PushWFArc f4 '' #zField
Bk2 @GridStep f5 '' #zField
Bk2 @GridStep f6 '' #zField
Bk2 @GridStep f8 '' #zField
Bk2 @GridStep f20 '' #zField
Bk2 @PushWFArc f9 '' #zField
Bk2 @CallSub f11 '' #zField
Bk2 @PushWFArc f13 '' #zField
Bk2 @PushWFArc f14 '' #zField
Bk2 @PushWFArc f1 '' #zField
Bk2 @PushWFArc f2 '' #zField
>Proto Bk2 Bk0 BpmnServiceTask #zField
Bk3 @TextInP .resExport .resExport #zField
Bk3 @TextInP .type .type #zField
Bk3 @TextInP .processKind .processKind #zField
Bk3 @AnnotationInP-0n ai ai #zField
Bk3 @MessageFlowInP-0n messageIn messageIn #zField
Bk3 @MessageFlowOutP-0n messageOut messageOut #zField
Bk3 @TextInP .xml .xml #zField
Bk3 @TextInP .responsibility .responsibility #zField
Bk3 @RichDialog f27 '' #zField
Bk3 @PushTrueWFInG-01 g0 '' #zField
Bk3 @PushWFArc f0 '' #zField
Bk3 @PushTrueWFOutG-01 g1 '' #zField
Bk3 @PushWFArc f1 '' #zField
>Proto Bk3 Bk1 BpmnUserTask #zField
Bk5 @TextInP .resExport .resExport #zField
Bk5 @TextInP .type .type #zField
Bk5 @TextInP .processKind .processKind #zField
Bk5 @AnnotationInP-0n ai ai #zField
Bk5 @MessageFlowInP-0n messageIn messageIn #zField
Bk5 @MessageFlowOutP-0n messageOut messageOut #zField
Bk5 @TextInP .xml .xml #zField
Bk5 @TextInP .responsibility .responsibility #zField
Bk5 @EMail f11 '' #zField
Bk5 @DBStep f5 '' #zField
Bk5 @PushTrueWFInG-01 g0 '' #zField
Bk5 @PushWFArc f0 '' #zField
Bk5 @PushTrueWFOutG-01 g1 '' #zField
Bk5 @PushWFArc f1 '' #zField
Bk5 @GridStep f3 '' #zField
Bk5 @PushWFArc f2 '' #zField
Bk5 @GridStep f6 '' #zField
Bk5 @PushWFArc f7 '' #zField
Bk5 @Alternative f9 '' #zField
Bk5 @PushWFArc f10 '' #zField
Bk5 @DBStep f12 '' #zField
Bk5 @PushWFArc f13 '' #zField
Bk5 @GridStep f14 '' #zField
Bk5 @PushWFArc f15 '' #zField
Bk5 @PushWFArc f4 '' #zField
Bk5 @GridStep f16 '' #zField
Bk5 @DBStep f17 '' #zField
Bk5 @GridStep f18 '' #zField
Bk5 @Alternative f19 '' #zField
Bk5 @PushWFArc f20 '' #zField
Bk5 @PushWFArc f21 '' #zField
Bk5 @PushWFArc f22 '' #zField
Bk5 @PushWFArc f23 '' #zField
Bk5 @Alternative f25 '' #zField
Bk5 @DBStep f26 '' #zField
Bk5 @GridStep f27 '' #zField
Bk5 @GridStep f28 '' #zField
Bk5 @PushWFArc f29 '' #zField
Bk5 @PushWFArc f30 '' #zField
Bk5 @PushWFArc f31 '' #zField
Bk5 @PushWFArc f32 '' #zField
Bk5 @PushWFArc f33 '' #zField
Bk5 @PushWFArc f34 '' #zField
Bk5 @PushWFArc f24 '' #zField
>Proto Bk5 Bk2 BpmnServiceTask #zField
Bk1 @TextInP .resExport .resExport #zField
Bk1 @TextInP .type .type #zField
Bk1 @TextInP .processKind .processKind #zField
Bk1 @AnnotationInP-0n ai ai #zField
Bk1 @MessageFlowInP-0n messageIn messageIn #zField
Bk1 @MessageFlowOutP-0n messageOut messageOut #zField
Bk1 @TextInP .xml .xml #zField
Bk1 @TextInP .responsibility .responsibility #zField
Bk1 @EMail f3 '' #zField
Bk1 @GridStep f1 '' #zField
Bk1 @PushTrueWFInG-01 g0 '' #zField
Bk1 @PushWFArc f2 '' #zField
Bk1 @PushWFArc f4 '' #zField
Bk1 @PushTrueWFOutG-01 g2 '' #zField
Bk1 @PushWFArc f0 '' #zField
>Proto Bk1 Bk3 BpmnSendTask #zField
Bk0 @TextInP .resExport .resExport #zField
Bk0 @TextInP .type .type #zField
Bk0 @TextInP .processKind .processKind #zField
Bk0 @AnnotationInP-0n ai ai #zField
Bk0 @MessageFlowInP-0n messageIn messageIn #zField
Bk0 @MessageFlowOutP-0n messageOut messageOut #zField
Bk0 @TextInP .xml .xml #zField
Bk0 @TextInP .responsibility .responsibility #zField
Bk0 @PushTrueWFInG-01 g0 '' #zField
Bk0 @PushTrueWFOutG-01 g1 '' #zField
Bk0 @RichDialog f1 '' #zField
Bk0 @PushWFArc f2 '' #zField
Bk0 @RichDialog f10 '' #zField
Bk0 @PushWFArc f0 '' #zField
Bk0 @PushWFArc f3 '' #zField
>Proto Bk0 Bk4 BpmnUserTask #zField
En0 f1 type einbuergerung_Gruppe6.Data #txt
En0 f1 1257 89 30 30 0 15 #rect
En0 f1 @|EndSubIcon #fIcon
En0 f13 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
En0 f13 actionTable 'out=in1;
' #txt
En0 f13 outTypes "einbuergerung_Gruppe6.Data" #txt
En0 f13 outLinks "TaskA.ivp" #txt
En0 f13 caseData '#
#Tue Dec 08 13:29:47 CET 2015
businessCalendarName=
businessCreator.user=
businessMilestone.timestamp=
businessObject.code=
businessObject.docDb.code=
businessObject.folder.id=
businessObject.name=
businessPriority=
businessStart.timestamp=
case.description=
case.name=
correspondent.id=
mainContact.docDb.code=
mainContact.folder.id=
mainContact.id=
mainContact.name=
mainContact.type=
process.code=
process.name=
processCategory.code=
processCategory.name=
subType.code=
subType.name=
type.code=
type.name=
' #txt
En0 f13 taskData '#
#Tue Dec 08 13:29:47 CET 2015
TaskA.EXPRI=2
TaskA.EXROL=Everybody
TaskA.EXTYPE=0
TaskA.NAM=Bitte erstinstanzlichen Entscheid zu Gesuch <%\=in1.request.uniqueIdentifier%> f\u00E4llen
TaskA.PRI=2
TaskA.ROL=Migrationsamt Pr\u00FCfer
TaskA.SKIP_TASK_LIST=false
TaskA.TYPE=0
' #txt
En0 f13 taskAction 'import ch.ivyteam.ivy.workflow.TaskDefinition;
List<TaskDefinition> taskDefinitions;
TaskDefinition taskDef;import ch.ivyteam.ivy.request.impl.DefaultCalendarProxy;
DefaultCalendarProxy calendarProxy = ivy.cal as DefaultCalendarProxy;
taskDef = new TaskDefinition();
taskDef.setStartRequestPath("TaskA.ivp");
taskDef.setName(engine.expandMacros("Bitte erstinstanzlichen Entscheid zu Gesuch <%=in1.request.uniqueIdentifier%> fällen"));
taskDef.setAutoStartTask(false);
taskDef.setActivator("Migrationsamt Prüfer");
taskDef.setPriority(ch.ivyteam.ivy.workflow.WorkflowPriority.valueOf(2));
taskDef.setExpiryActivator("Everybody");
taskDef.setExpiryPriority(ch.ivyteam.ivy.workflow.WorkflowPriority.valueOf(2));
taskDefinitions.add(taskDef);
' #txt
En0 f13 type einbuergerung_Gruppe6.Data #txt
En0 f13 template "" #txt
En0 f13 120 88 32 32 0 16 #rect
En0 f13 @|TaskSwitchIcon #fIcon
En0 f7 expr data #txt
En0 f7 outCond ivp=="TaskA.ivp" #txt
En0 f7 152 104 186 104 #arcP
En0 f9 406 104 440 104 #arcP
En0 S21 .resExport export #txt
En0 S21 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Für jede Person eine
Verfügung erstellen</name>
        <nameStyle>40,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 S21 440 82 176 44 -57 -20 #rect
En0 S21 @|BpmnServiceTaskIcon #fIcon
En0 S21 g1 88 -2 #fFoot
En0 S11 .resExport export #txt
En0 S11 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Erstinstanlicher Entscheid fällen
und Begründung erfassen</name>
        <nameStyle>57,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 S11 186 82 220 44 -88 -20 #rect
En0 S11 @|BpmnUserTaskIcon #fIcon
En0 S41 .resExport export #txt
En0 S41 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Antragsteller informieren
Daten persistieren</name>
        <nameStyle>44,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 S41 648 82 192 44 -67 -20 #rect
En0 S41 @|BpmnServiceTaskIcon #fIcon
En0 f2 type einbuergerung_Gruppe6.Data #txt
En0 f2 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Min eine Person angenommen?</name>
        <nameStyle>27,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 f2 880 88 32 32 -43 -44 #rect
En0 f2 @|AlternativeIcon #fIcon
En0 f5 840 104 880 104 #arcP
En0 S30 .resExport export #txt
En0 S30 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Logindaten an 
Dep des Innern senden</name>
        <nameStyle>36,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 S30 944 130 160 44 -60 -16 #rect
En0 S30 @|BpmnSendTaskIcon #fIcon
En0 U10 .resExport export #txt
En0 U10 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>Gesuchsunterlagen
downloaden</name>
        <nameStyle>28,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 U10 1056 250 144 44 -51 -16 #rect
En0 U10 @|BpmnUserTaskIcon #fIcon
En0 U10 g0 -72 -2 #fFoot
En0 f3 616 102 648 104 #arcP
En0 f17 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
En0 f17 actionTable 'out=in1;
' #txt
En0 f17 outTypes "einbuergerung_Gruppe6.Data" #txt
En0 f17 outLinks "TaskA.ivp" #txt
En0 f17 caseData '#
#Tue Dec 08 19:22:12 CET 2015
businessCalendarName=
businessCreator.user=
businessMilestone.timestamp=
businessObject.code=
businessObject.docDb.code=
businessObject.folder.id=
businessObject.name=
businessPriority=
businessStart.timestamp=
case.description=
case.name=
correspondent.id=
mainContact.docDb.code=
mainContact.folder.id=
mainContact.id=
mainContact.name=
mainContact.type=
process.code=
process.name=
processCategory.code=
processCategory.name=
subType.code=
subType.name=
type.code=
type.name=
' #txt
En0 f17 taskData '#
#Tue Dec 08 19:22:12 CET 2015
TaskA.EXPRI=2
TaskA.EXROL=Everybody
TaskA.EXTYPE=0
TaskA.NAM=Bitte alle Dokumente zu Gesuch <%\=in1.request.uniqueIdentifier%> downloaden
TaskA.PRI=2
TaskA.ROL=Dept des Innern Kt SZ
TaskA.SKIP_TASK_LIST=false
TaskA.TYPE=0
' #txt
En0 f17 taskAction 'import ch.ivyteam.ivy.workflow.TaskDefinition;
List<TaskDefinition> taskDefinitions;
TaskDefinition taskDef;import ch.ivyteam.ivy.request.impl.DefaultCalendarProxy;
DefaultCalendarProxy calendarProxy = ivy.cal as DefaultCalendarProxy;
taskDef = new TaskDefinition();
taskDef.setStartRequestPath("TaskA.ivp");
taskDef.setName(engine.expandMacros("Bitte alle Dokumente zu Gesuch <%=in1.request.uniqueIdentifier%> downloaden"));
taskDef.setAutoStartTask(false);
taskDef.setActivator("Dept des Innern Kt SZ");
taskDef.setPriority(ch.ivyteam.ivy.workflow.WorkflowPriority.valueOf(2));
taskDef.setExpiryActivator("Everybody");
taskDef.setExpiryPriority(ch.ivyteam.ivy.workflow.WorkflowPriority.valueOf(2));
taskDefinitions.add(taskDef);
' #txt
En0 f17 type einbuergerung_Gruppe6.Data #txt
En0 f17 template "" #txt
En0 f17 1008 256 32 32 0 16 #rect
En0 f17 @|TaskSwitchIcon #fIcon
En0 f8 expr data #txt
En0 f8 outCond ivp=="TaskA.ivp" #txt
En0 f8 1039 271 1056 270 #arcP
En0 f12 expr in #txt
En0 f12 896 120 944 152 #arcP
En0 f12 1 896 152 #addKink
En0 f12 1 0.9110086358710967 0 0 #arcLabel
En0 f4 expr out #txt
En0 f4 type einbuergerung_Gruppe6.Data #txt
En0 f4 var in1 #txt
En0 f4 87 104 120 104 #arcP
En0 f0 inParamDecl '<einbuergerung_Gruppe6.Data data> param;' #txt
En0 f0 inParamTable 'out=param.data;
' #txt
En0 f0 outParamDecl '<einbuergerung_Gruppe6.Data data> result;
' #txt
En0 f0 outParamTable 'result.data=in;
' #txt
En0 f0 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
En0 f0 callSignature call(einbuergerung_Gruppe6.Data) #txt
En0 f0 type einbuergerung_Gruppe6.Data #txt
En0 f0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>call(Data)</name>
        <nameStyle>10,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 f0 57 89 30 30 -26 17 #rect
En0 f0 @|StartSubIcon #fIcon
En0 f11 type einbuergerung_Gruppe6.Data #txt
En0 f11 var in1 #txt
En0 f11 1024 174 1024 256 #arcP
En0 f15 type einbuergerung_Gruppe6.Data #txt
En0 f15 1200 88 32 32 0 16 #rect
En0 f15 @|AlternativeIcon #fIcon
En0 f16 expr in #txt
En0 f16 outCond !in.allBoolean #txt
En0 f16 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Nein</name>
        <nameStyle>4,7
</nameStyle>
    </language>
</elementInfo>
' #txt
En0 f16 912 104 1200 104 #arcP
En0 f16 0 0.0763888888888889 0 -11 #arcLabel
En0 f6 expr in #txt
En0 f6 1232 104 1257 104 #arcP
En0 f6 0 0.0378619153674833 0 -9 #arcLabel
En0 f10 1200 272 1216 120 #arcP
En0 f10 1 1216 272 #addKink
En0 f10 1 0.11672345752157963 0 0 #arcLabel
>Proto En0 .type einbuergerung_Gruppe6.Data #txt
>Proto En0 .processKind CALLABLE_SUB #txt
>Proto En0 .xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <swimlaneLabel>Migrationsamt</swimlaneLabel>
        <swimlaneLabel>Dept. des 
Innern, Kt SZ</swimlaneLabel>
    </language>
    <swimlaneOrientation>false</swimlaneOrientation>
    <swimlaneSize>152</swimlaneSize>
    <swimlaneSize>104</swimlaneSize>
    <swimlaneColor gradient="false">-3342337</swimlaneColor>
    <swimlaneColor gradient="false">-13057</swimlaneColor>
    <swimlaneType>POOL</swimlaneType>
    <swimlaneType>POOL</swimlaneType>
    <swimlaneSpaceBefore>32</swimlaneSpaceBefore>
    <swimlaneSpaceBefore>32</swimlaneSpaceBefore>
</elementInfo>
' #txt
>Proto En0 0 0 32 24 18 0 #rect
>Proto En0 @|BIcon #fIcon
Bk2 f15 type einbuergerung_Gruppe6.Data #txt
Bk2 f15 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>loop</name>
        <nameStyle>4,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f15 290 146 28 28 -32 -34 #rect
Bk2 f15 @|AlternativeIcon #fIcon
Bk2 f22 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f22 actionTable 'out=in;
out.person=in.request.personList.get(in.loopCount);
' #txt
Bk2 f22 type einbuergerung_Gruppe6.Data #txt
Bk2 f22 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>count Person up
axon ivy workaround</name>
        <nameStyle>35,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f22 344 138 144 44 -51 -16 #rect
Bk2 f22 @|StepIcon #fIcon
Bk2 f7 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f7 actionTable 'out=in;
out.loopCount=0;
out.loopIterations=in.request.personList.size();
out.person=in.request.personList.get(0);
' #txt
Bk2 f7 type einbuergerung_Gruppe6.Data #txt
Bk2 f7 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init Loop</name>
        <nameStyle>9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f7 136 138 112 44 -23 -8 #rect
Bk2 f7 @|StepIcon #fIcon
Bk2 f23 expr out #txt
Bk2 f23 1400 138 304 146 #arcP
Bk2 f23 1 1400 102 #addKink
Bk2 f23 2 304 102 #addKink
Bk2 f23 1 0.50625 0 0 #arcLabel
Bk2 f21 expr in #txt
Bk2 f21 outCond in.loopCount<in.loopIterations #txt
Bk2 f21 318 160 344 160 #arcP
Bk2 f17 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f17 actionTable 'out=in;
' #txt
Bk2 f17 actionCode 'import einbuergerung_Gruppe6.Person;


out.person.disposal=in.document;
out.request.personList.set(in.loopCount,in.person);

out.loopCount++;

//in.person = new Person();
//out.setPerson(in.request.personList.get(out.loopCount));
' #txt
Bk2 f17 type einbuergerung_Gruppe6.Data #txt
Bk2 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Loop count</name>
        <nameStyle>10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f17 1344 138 112 44 -30 -8 #rect
Bk2 f17 @|StepIcon #fIcon
Bk2 f10 expr out #txt
Bk2 f10 248 160 290 160 #arcP
Bk2 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Bk2 g0 51 147 26 26 -38 27 #rect
Bk2 g0 @|MIGIcon #fIcon
Bk2 f0 77 160 136 160 #arcP
Bk2 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Bk2 g1 579 251 26 26 22 -19 #rect
Bk2 g1 @|MOGIcon #fIcon
Bk2 f3 expr out #txt
Bk2 f3 624 160 664 160 #arcP
Bk2 f4 expr out #txt
Bk2 f4 776 160 808 160 #arcP
Bk2 f5 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f5 actionTable 'out=in;
' #txt
Bk2 f5 actionCode 'import einbuergerung_Gruppe6.Document;
import java.io.InputStream;
import org.primefaces.model.UploadedFile;
import ch.ivyteam.ivy.cm.CoType;
import ch.ivyteam.ivy.cm.IContentObject;

import org.primefaces.model.DefaultStreamedContent;

import ch.ivyteam.ivy.cm.IContentObjectValue;

File f = new File(in.document.templatePath);

if (! f.exists())
{
  // legt leeres file an (muss vorhanden sein für export)
  f.createNewFile();
  // export content from cms
  IContentObjectValue cov = ivy.cms.getContentObjectValue(in.document.templatePath, null,true);
  cov.exportContentToFile(f.getJavaFile(), null);
}

if(f.exists()){
  out.document.templatePath = f.getAbsolutePath();
}' #txt
Bk2 f5 type einbuergerung_Gruppe6.Data #txt
Bk2 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Templatepfad 
auslesen</name>
        <nameStyle>22,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f5 664 138 112 44 -39 -16 #rect
Bk2 f5 @|StepIcon #fIcon
Bk2 f6 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f6 actionTable 'out=in;
' #txt
Bk2 f6 actionCode '
in.document.fileName = "Verfügung_Gesuch_"+in.request.uniqueIdentifier+"_"+in.person.firstname+"_"+in.person.lastname;
//in.document.templatePath="C:/Axonivy_Workspace/Einbuergerung/cms/DocumentTemplates/template_verfuegung";
in.document.setTemplatePath("/DocumentTemplates/template_verfuegung");
in.document.fileType="pdf";




' #txt
Bk2 f6 type einbuergerung_Gruppe6.Data #txt
Bk2 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Set Document
Attributes</name>
        <nameStyle>13,7
10,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f6 512 138 112 44 -39 -16 #rect
Bk2 f6 @|StepIcon #fIcon
Bk2 f8 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f8 actionTable 'out=in;
' #txt
Bk2 f8 actionCode 'import java.io.FileInputStream;
import einbuergerung_Gruppe6.Document;
import java.io.InputStream;
import org.primefaces.model.UploadedFile;
import ch.ivyteam.ivy.cm.CoType;
import ch.ivyteam.ivy.cm.IContentObject;
import ch.ivyteam.ivy.cm.IContentObjectValue;
import org.primefaces.model.DefaultStreamedContent;

// Der CMS-Ordner, in welchem die hochgeladene Datei abgelegt werden soll, wird bestimmt
IContentObject baseFolder = ivy.cms.findContentObject("/Disposals");

// Der Name des CMS-Objekts wird aus dem Dateinamen abgeleitet
String coName = in.document.fileName;
if (coName.contains("\\") || coName.contains("/"))
{
    // Wegen Internet Explorer erforderlich
    int fileNameStartIndex = coName.replace("", "/").lastIndexOf("/");
    coName = coName.substring(fileNameStartIndex+1);
}
String firstCoName = coName;
Number counter = 1;
while (baseFolder.getChild(coName) != null)
{
    coName = firstCoName + "_" + counter;
    counter++;
}

// Der Typ des CMS-Objekts wird aus der Dateiendung abgeleitet
String extension;
CoType coType;
coType = ch.ivyteam.ivy.cm.CoType.PDF;
    extension = "pdf";


// Im CMS nicht erlaubte Zeichen werden aus dem Namen des CMS-Objekts entfernt
coName = coName.replaceAll("[^\\p{Alnum}_-]+[^\\p{Alnum}_.+\\-]*", "_");

// Das CMS-Objekt wird angelegt, wobei alle Metadaten leer bleiben mit Ausnahme von Name und Typ. Der Inhalt des CMS-Objekts selbst wird aus dem InputStream der Datei erstellt.
IContentObject newCMSObject = baseFolder.addChild(coName, "", coType, null);
IContentObjectValue cov = newCMSObject.addValue("", null, null, null, "", true, null);
InputStream inputStream = new FileInputStream(in.document.fileOperationMesage.files.get(0));
try
{
 //   inputStream = uploadedFile.getInputstream();
    cov.setContent(inputStream, 0, null);
}
finally
{
    if (#inputStream != null)
    {
        inputStream.close();
    }
}

// Die relevanten Eigenschaften des CMS-Objekts werden ins Data-Objekt zurück gegeben
Document document = new Document();
document.fileName = newCMSObject.getName();
document.fileEnding = extension;
document.fileType = "Verfuegung";
document.filePath = cov.getContentObject().getUri();

out.request.documents.add(document);' #txt
Bk2 f8 type einbuergerung_Gruppe6.Data #txt
Bk2 f8 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Upload File to CMS</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f8 1200 138 112 44 -52 -8 #rect
Bk2 f8 @|StepIcon #fIcon
Bk2 f20 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f20 actionTable 'out=in;
' #txt
Bk2 f20 actionCode 'import ch.ivyteam.ivy.addons.docfactory.TemplateMergeField;

in.document.templateMergeFields.clear();
in.document.templateMergeFields.add(new TemplateMergeField("REQUESTID",in.request.uniqueIdentifier));
in.document.templateMergeFields.add(new TemplateMergeField("NAME",in.person.lastname));
in.document.templateMergeFields.add(new TemplateMergeField("FIRSTNAME",in.person.firstname));
in.document.templateMergeFields.add(new TemplateMergeField("ADDRESS",in.request.address+", "+in.request.postcode+" "+in.request.city));
in.document.templateMergeFields.add(new TemplateMergeField("EMAIL",in.request.email));
in.document.templateMergeFields.add(new TemplateMergeField("PHONE",in.request.phone));

if(in.person.approved){
	in.document.templateMergeFields.add(new TemplateMergeField("DECISION","bewilligt"));
	}
else{
	in.document.templateMergeFields.add(new TemplateMergeField("DECISION","abgelehnt"));
	}

in.document.templateMergeFields.add(new TemplateMergeField("REASON",in.person.authorityStatement));' #txt
Bk2 f20 type einbuergerung_Gruppe6.Data #txt
Bk2 f20 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build Merge Fields</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f20 808 138 112 44 -51 -8 #rect
Bk2 f20 @|StepIcon #fIcon
Bk2 f9 expr out #txt
Bk2 f9 920 160 952 160 #arcP
Bk2 f11 type einbuergerung_Gruppe6.Data #txt
Bk2 f11 processCall 'Functional Processes/writeSerialLetterToOneCorrespondent:writeSerialLetterToOneCorrespondant(List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField>,String,String,String,String)' #txt
Bk2 f11 doCall true #txt
Bk2 f11 requestActionDecl '<List<ch.ivyteam.ivy.addons.docfactory.TemplateMergeField> listOfTemplateMergeFields,java.lang.String optionalOutputpath,java.lang.String optionalLetterName,java.lang.String optionalOutputFormat,java.lang.String templatePath> param;
' #txt
Bk2 f11 requestMappingAction 'param.listOfTemplateMergeFields=in.document.templateMergeFields;
param.optionalLetterName=in.document.fileName;
param.optionalOutputFormat=in.document.fileType;
param.templatePath="C:/Axonivy_Workspace/Einbuergerung/cms/DocumentTemplates/template_verfuegung/1515D4DE5E377A7A.doc";
' #txt
Bk2 f11 responseActionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk2 f11 responseMappingAction 'out=in;
out.document.fileOperationMesage=result.fileOperationMessage;
out.document.filePath=result.fileOperationMessage.files.get(0).getAbsolutePath();
' #txt
Bk2 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>writeSerialLetterToOneCorrespondent</name>
        <nameStyle>35,5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk2 f11 952 138 224 44 -104 -8 #rect
Bk2 f11 @|CallSubIcon #fIcon
Bk2 f13 expr out #txt
Bk2 f13 488 160 512 160 #arcP
Bk2 f14 expr out #txt
Bk2 f14 1312 160 1344 160 #arcP
Bk2 f1 expr in #txt
Bk2 f1 304 174 579 264 #arcP
Bk2 f1 1 304 264 #addKink
Bk2 f1 1 0.37054343484119606 0 0 #arcLabel
Bk2 f2 expr out #txt
Bk2 f2 1176 160 1200 160 #arcP
>Proto Bk0 0 0 32 24 18 0 #rect
>Proto Bk0 @|BIcon #fIcon
Bk3 f27 targetWindow NEW:card: #txt
Bk3 f27 targetDisplay TOP #txt
Bk3 f27 richDialogId einbuergerung_Gruppe6.erstinstanzlicherEntscheid_V2 #txt
Bk3 f27 startMethod start(einbuergerung_Gruppe6.Request,einbuergerung_Gruppe6.Document) #txt
Bk3 f27 type einbuergerung_Gruppe6.Data #txt
Bk3 f27 requestActionDecl '<einbuergerung_Gruppe6.Request request, einbuergerung_Gruppe6.Document document> param;' #txt
Bk3 f27 requestMappingAction 'param.request=in.request;
param.document=in.document;
' #txt
Bk3 f27 responseActionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk3 f27 responseMappingAction 'out=in;
out.document=result.document;
out.request=result.request;
' #txt
Bk3 f27 windowConfiguration '* ' #txt
Bk3 f27 isAsynch false #txt
Bk3 f27 isInnerRd false #txt
Bk3 f27 userContext '* ' #txt
Bk3 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Entscheid und
Begründung erfassen</name>
        <nameStyle>14,7
19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk3 f27 136 138 144 44 -54 -16 #rect
Bk3 f27 @|RichDialogIcon #fIcon
Bk3 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Bk3 g0 51 147 26 26 0 5 #rect
Bk3 g0 @|MIGIcon #fIcon
Bk3 f0 77 160 136 160 #arcP
Bk3 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Bk3 g1 339 147 26 26 0 5 #rect
Bk3 g1 @|MOGIcon #fIcon
Bk3 f1 expr out #txt
Bk3 f1 280 160 339 160 #arcP
>Proto Bk1 0 0 32 24 18 0 #rect
>Proto Bk1 @|BIcon #fIcon
Bk5 f11 beanConfig '"{/emailSubject ""Entscheid Einbürgerung""/emailFrom ""noreply@migration.sz.ch""/emailReplyTo """"/emailTo ""<%=in.request.email%>""/emailCC """"/emailBCC """"/exceptionMissingEmailAttachments ""false""/emailMessage ""<%=in.request.publicationData%>""/emailAttachments * }"' #txt
Bk5 f11 type einbuergerung_Gruppe6.Data #txt
Bk5 f11 timeout 0 #txt
Bk5 f11 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Dossier schicken</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f11 936 458 112 44 -48 -8 #rect
Bk5 f11 @|EMailIcon #fIcon
Bk5 f5 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f5 actionTable 'out=in;
' #txt
Bk5 f5 dbSql '<?xml version=""1.0"" standalone=""no""?>
<!DOCTYPE UPDATE SYSTEM  ""sqlStatements.dtd"">
<UPDATE><Table name=''Request''/><Value column=''status''><String>""Beendet""</String></Value><Condition><Relation kind=''=''><Column name=''uniqueIdentifier''/><AnyExpression>in.request.uniqueIdentifier</AnyExpression></Relation></Condition></UPDATE>' #txt
Bk5 f5 dbUrl AmazonDB #txt
Bk5 f5 cache '{/cache false /invalidation false /scope 0 /groupname ""/lifetime_group "0"/invalidation_time_group ""/identifier ""/lifetime_entry "0"/invalidation_time_entry ""}' #txt
Bk5 f5 dbWizard 'uniqueIdentifier = in.request.uniqueIdentifier' #txt
Bk5 f5 lotSize 2147483647 #txt
Bk5 f5 startIdx 0 #txt
Bk5 f5 type einbuergerung_Gruppe6.Data #txt
Bk5 f5 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Request Daten 
persistieren</name>
        <nameStyle>27,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f5 112 138 128 44 -41 -16 #rect
Bk5 f5 @|DBStepIcon #fIcon
Bk5 g0 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>in 1</name>
    </language>
</elementInfo>
' #txt
Bk5 g0 51 147 26 26 -11 26 #rect
Bk5 g0 @|MIGIcon #fIcon
Bk5 f0 77 160 112 160 #arcP
Bk5 g1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language lang="en">
        <name>out 1</name>
    </language>
</elementInfo>
' #txt
Bk5 g1 1107 467 26 26 -13 18 #rect
Bk5 g1 @|MOGIcon #fIcon
Bk5 f1 expr out #txt
Bk5 f1 1048 480 1107 480 #arcP
Bk5 f3 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f3 actionTable 'out=in;
' #txt
Bk5 f3 actionCode 'import einbuergerung_Gruppe6.Person;
Person person;
String s="Gesuchs ID: "+in.request.uniqueIdentifier+"\n\n";
in.allBoolean=false;
for(int i=0; i<in.request.personList.size();i++){
	person = in.request.personList.get(i);
	
	s=s+"Person "+(i+1)+"\n";
	if(person.approved){
	  s=s+"Entscheid: Angenommen\n";
		in.allBoolean=true;}
	else{
		s=s+"Entscheid: Abgelehnt\n";}
	s=s+"Begründung: "+person.authorityStatement+"\n";
	}
	
	out.request.publicationData=s;
' #txt
Bk5 f3 type einbuergerung_Gruppe6.Data #txt
Bk5 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Build Email String</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f3 776 458 112 44 -49 -8 #rect
Bk5 f3 @|StepIcon #fIcon
Bk5 f2 expr out #txt
Bk5 f2 888 480 936 480 #arcP
Bk5 f6 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f6 actionTable 'out=in;
out.loopCount=0;
out.loopIterations=in.request.personList.size();
out.person=in.request.personList.get(0);
' #txt
Bk5 f6 type einbuergerung_Gruppe6.Data #txt
Bk5 f6 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init Person Loop</name>
        <nameStyle>16,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f6 280 138 112 44 -45 -8 #rect
Bk5 f6 @|StepIcon #fIcon
Bk5 f7 expr out #txt
Bk5 f7 240 160 280 160 #arcP
Bk5 f9 type einbuergerung_Gruppe6.Data #txt
Bk5 f9 448 144 32 32 0 16 #rect
Bk5 f9 @|AlternativeIcon #fIcon
Bk5 f10 expr out #txt
Bk5 f10 392 160 448 160 #arcP
Bk5 f12 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f12 actionTable 'out=in;
' #txt
Bk5 f12 dbSql '<?xml version=""1.0"" standalone=""no""?>
<!DOCTYPE UPDATE SYSTEM  ""sqlStatements.dtd"">
<UPDATE><Table name=''Person''/><Value column=''decision''><AnyExpression>in.person.approved</AnyExpression></Value><Value column=''authorityStatement''><AnyExpression>in.person.authorityStatement</AnyExpression></Value><Value column=''meetingComment''><AnyExpression>in.person.notes</AnyExpression></Value><Condition><Relation kind=''=''><Column name=''requestUI''/><AnyExpression>in.request.uniqueIdentifier</AnyExpression></Relation></Condition></UPDATE>' #txt
Bk5 f12 dbUrl AmazonDB #txt
Bk5 f12 cache '{/cache false /invalidation false /scope 0 /groupname ""/lifetime_group "0"/invalidation_time_group ""/identifier ""/lifetime_entry "0"/invalidation_time_entry ""}' #txt
Bk5 f12 dbWizard 'requestUI = in.request.uniqueIdentifier' #txt
Bk5 f12 lotSize 2147483647 #txt
Bk5 f12 startIdx 0 #txt
Bk5 f12 type einbuergerung_Gruppe6.Data #txt
Bk5 f12 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Update Person 
in DB</name>
        <nameStyle>15,7
5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f12 528 138 128 44 -41 -16 #rect
Bk5 f12 @|DBStepIcon #fIcon
Bk5 f13 expr in #txt
Bk5 f13 outCond in.loopCount<in.loopIterations #txt
Bk5 f13 480 160 528 160 #arcP
Bk5 f14 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f14 actionTable 'out=in;
' #txt
Bk5 f14 actionCode 'out.loopCount++;
if(out.loopCount < in.loopIterations){
out.person = in.request.personList.get(out.loopCount);}' #txt
Bk5 f14 type einbuergerung_Gruppe6.Data #txt
Bk5 f14 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>coutnter up</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f14 696 138 112 44 -30 -8 #rect
Bk5 f14 @|StepIcon #fIcon
Bk5 f15 expr out #txt
Bk5 f15 656 160 696 160 #arcP
Bk5 f4 expr out #txt
Bk5 f4 752 138 464 144 #arcP
Bk5 f4 1 752 112 #addKink
Bk5 f4 2 464 112 #addKink
Bk5 f4 1 0.41551637105665956 0 0 #arcLabel
Bk5 f16 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f16 actionTable 'out=in;
' #txt
Bk5 f16 actionCode 'out.loopCount++;
if(out.loopCount < in.loopIterations){
out.document = in.request.documents.get(out.loopCount);}' #txt
Bk5 f16 type einbuergerung_Gruppe6.Data #txt
Bk5 f16 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>coutnter up</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f16 824 250 112 44 -30 -8 #rect
Bk5 f16 @|StepIcon #fIcon
Bk5 f17 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f17 actionTable 'out=in;
' #txt
Bk5 f17 dbSql '<?xml version=""1.0"" standalone=""no""?>
<!DOCTYPE INSERT SYSTEM  ""sqlStatements.dtd"">
<INSERT><Table name=''Document''/><Value column=''link''><AnyExpression>in.document.filePath</AnyExpression></Value><Value column=''type''><AnyExpression>in.document.fileType</AnyExpression></Value><Value column=''requestUI''><AnyExpression>in.request.uniqueIdentifier</AnyExpression></Value></INSERT>' #txt
Bk5 f17 dbUrl AmazonDB #txt
Bk5 f17 cache '{/cache false /invalidation false /scope 0 /groupname ""/lifetime_group "0"/invalidation_time_group ""/identifier ""/lifetime_entry "0"/invalidation_time_entry ""}' #txt
Bk5 f17 lotSize 2147483647 #txt
Bk5 f17 startIdx 0 #txt
Bk5 f17 type einbuergerung_Gruppe6.Data #txt
Bk5 f17 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Insert Document
into DB</name>
        <nameStyle>16,7
7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f17 656 250 128 44 -42 -16 #rect
Bk5 f17 @|DBStepIcon #fIcon
Bk5 f18 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f18 actionTable 'out=in;
out.document=in.request.documents.get(0);
out.loopCount=0;
out.loopIterations=in.request.documents.size();
' #txt
Bk5 f18 type einbuergerung_Gruppe6.Data #txt
Bk5 f18 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init Document Loop</name>
        <nameStyle>18,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f18 408 250 112 44 -53 -8 #rect
Bk5 f18 @|StepIcon #fIcon
Bk5 f19 type einbuergerung_Gruppe6.Data #txt
Bk5 f19 576 256 32 32 0 16 #rect
Bk5 f19 @|AlternativeIcon #fIcon
Bk5 f20 expr out #txt
Bk5 f20 520 272 576 272 #arcP
Bk5 f21 expr in #txt
Bk5 f21 outCond in.loopCount<in.loopIterations #txt
Bk5 f21 608 272 656 272 #arcP
Bk5 f22 expr out #txt
Bk5 f22 784 272 824 272 #arcP
Bk5 f23 expr out #txt
Bk5 f23 880 250 592 256 #arcP
Bk5 f23 1 880 227 #addKink
Bk5 f23 2 592 227 #addKink
Bk5 f23 1 0.41551637105665956 0 0 #arcLabel
Bk5 f25 type einbuergerung_Gruppe6.Data #txt
Bk5 f25 704 360 32 32 0 16 #rect
Bk5 f25 @|AlternativeIcon #fIcon
Bk5 f26 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f26 actionTable 'out=in;
' #txt
Bk5 f26 dbSql '<?xml version=""1.0"" standalone=""no""?>
<!DOCTYPE INSERT SYSTEM  ""sqlStatements.dtd"">
<INSERT><Table name=''Objection''/><Value column=''author''><AnyExpression>in.objection.author</AnyExpression></Value><Value column=''text''><AnyExpression>in.objection.text</AnyExpression></Value><Value column=''requestUI''><AnyExpression>in.request.uniqueIdentifier</AnyExpression></Value><Value column=''date''><AnyExpression>in.objection.date</AnyExpression></Value><Value column=''statementOral''><AnyExpression>in.objection.statementOral</AnyExpression></Value><Value column=''statementWritten''><AnyExpression>in.objection.statementWritten</AnyExpression></Value></INSERT>' #txt
Bk5 f26 dbUrl AmazonDB #txt
Bk5 f26 cache '{/cache false /invalidation false /scope 0 /groupname ""/lifetime_group "0"/invalidation_time_group ""/identifier ""/lifetime_entry "0"/invalidation_time_entry ""}' #txt
Bk5 f26 lotSize 2147483647 #txt
Bk5 f26 startIdx 0 #txt
Bk5 f26 type einbuergerung_Gruppe6.Data #txt
Bk5 f26 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Insert Objections
into DB</name>
        <nameStyle>18,7
7,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f26 784 354 128 44 -43 -16 #rect
Bk5 f26 @|DBStepIcon #fIcon
Bk5 f27 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f27 actionTable 'out=in;
' #txt
Bk5 f27 actionCode 'out.loopCount++;
if(out.loopCount < in.loopIterations){
out.objection =  in.request.objections.get(out.loopCount);}' #txt
Bk5 f27 type einbuergerung_Gruppe6.Data #txt
Bk5 f27 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>coutnter up</name>
        <nameStyle>11,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f27 952 354 112 44 -30 -8 #rect
Bk5 f27 @|StepIcon #fIcon
Bk5 f28 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk5 f28 actionTable 'out=in;
out.loopCount=0;
out.loopIterations=in.request.objections.size();
out.objection=in.request.objections.get(0);
' #txt
Bk5 f28 type einbuergerung_Gruppe6.Data #txt
Bk5 f28 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Init Objection Loop</name>
        <nameStyle>19,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk5 f28 536 354 112 44 -51 -8 #rect
Bk5 f28 @|StepIcon #fIcon
Bk5 f29 expr out #txt
Bk5 f29 648 376 704 376 #arcP
Bk5 f30 expr in #txt
Bk5 f30 outCond in.loopCount<in.loopIterations #txt
Bk5 f30 736 376 784 376 #arcP
Bk5 f31 expr out #txt
Bk5 f31 912 376 952 376 #arcP
Bk5 f32 expr out #txt
Bk5 f32 1008 354 720 360 #arcP
Bk5 f32 1 1008 332 #addKink
Bk5 f32 2 720 332 #addKink
Bk5 f32 1 0.41551637105665956 0 0 #arcLabel
Bk5 f33 expr in #txt
Bk5 f33 592 288 592 354 #arcP
Bk5 f34 expr in #txt
Bk5 f34 720 392 776 480 #arcP
Bk5 f34 1 720 480 #addKink
Bk5 f34 1 0.07800712579881926 0 0 #arcLabel
Bk5 f24 expr in #txt
Bk5 f24 465 175 464 250 #arcP
Bk5 f24 0 0.6323843758318921 0 0 #arcLabel
>Proto Bk2 0 0 32 24 18 0 #rect
>Proto Bk2 @|BpmnServiceTaskIcon #fIcon
Bk1 f3 beanConfig '"{/emailSubject ""Neuer Einbürgerungsantrag""/emailFrom ""info@migrationsamt.ch""/emailReplyTo """"/emailTo ""depdesinnern@sz.ch""/emailCC """"/emailBCC """"/exceptionMissingEmailAttachments ""false""/emailMessage ""Sehr geehrte Damen und Herren\\n\\n<%=in.mailString%>\\n\\nFolgende Login Daten können Sie für Antrag Nr. <%=in.request.uniqueIdentifier%> benutzen:\\n\\nBenutzername: <%=in.externeBehoerde.username%>\\nPasswort: <%=in.externeBehoerde.password%>\\n\\nVielen Dank im Voraus für die Zusammenarbeit.\\n\\nFreundliche Grüsse\\n\\nDas Migrationsamt""/emailAttachments * }"' #txt
Bk1 f3 type einbuergerung_Gruppe6.Data #txt
Bk1 f3 timeout 0 #txt
Bk1 f3 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Login per Mail
versenden</name>
        <nameStyle>15,7
9,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk1 f3 424 170 112 44 -38 -16 #rect
Bk1 f3 @|EMailIcon #fIcon
Bk1 f1 actionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk1 f1 actionTable 'out=in;
out.externeBehoerde.password=einbuergerung_Gruppe6.CodingHelper.generatePassword();
out.externeBehoerde.username=einbuergerung_Gruppe6.CodingHelper.generateUniqueIdentifier();
out.mailString="Wir bitten Sie die entsprechenden Dokumente zu beziehen. Weitere Informationen finden Sie auf unserem Portal.";
' #txt
Bk1 f1 type einbuergerung_Gruppe6.Data #txt
Bk1 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Passwort für Dep 
des Innerngenerieren</name>
        <nameStyle>13,7
25,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk1 f1 216 170 144 44 -53 -16 #rect
Bk1 f1 @|StepIcon #fIcon
Bk1 g0 123 179 26 26 0 5 #rect
Bk1 g0 @|MIGIcon #fIcon
Bk1 f2 149 192 216 192 #arcP
Bk1 f4 expr out #txt
Bk1 f4 360 192 424 192 #arcP
Bk1 g2 595 179 26 26 0 5 #rect
Bk1 g2 @|MOGIcon #fIcon
Bk1 f0 expr out #txt
Bk1 f0 536 192 595 192 #arcP
>Proto Bk3 0 0 32 24 18 0 #rect
>Proto Bk3 @|BIcon #fIcon
Bk0 g0 -13 219 26 26 0 5 #rect
Bk0 g0 @|MIGIcon #fIcon
Bk0 g1 547 235 26 26 0 5 #rect
Bk0 g1 @|MOGIcon #fIcon
Bk0 f1 targetWindow NEW:card: #txt
Bk0 f1 targetDisplay TOP #txt
Bk0 f1 richDialogId einbuergerung_Gruppe6.Login #txt
Bk0 f1 startMethod start(String,String) #txt
Bk0 f1 type einbuergerung_Gruppe6.Data #txt
Bk0 f1 requestActionDecl '<String email, String password> param;' #txt
Bk0 f1 requestMappingAction 'param.email=in.externeBehoerde.username;
param.password=in.externeBehoerde.password;
' #txt
Bk0 f1 responseActionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk0 f1 responseMappingAction 'out=in;
' #txt
Bk0 f1 windowConfiguration '* ' #txt
Bk0 f1 isAsynch false #txt
Bk0 f1 isInnerRd false #txt
Bk0 f1 userContext '* ' #txt
Bk0 f1 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Login</name>
        <nameStyle>5,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk0 f1 144 226 112 44 -15 -8 #rect
Bk0 f1 @|RichDialogIcon #fIcon
Bk0 f2 12 233 144 248 #arcP
Bk0 f10 targetWindow NEW:card: #txt
Bk0 f10 targetDisplay TOP #txt
Bk0 f10 richDialogId einbuergerung_Gruppe6.unterlagenDownload #txt
Bk0 f10 startMethod start(einbuergerung_Gruppe6.Request) #txt
Bk0 f10 type einbuergerung_Gruppe6.Data #txt
Bk0 f10 requestActionDecl '<einbuergerung_Gruppe6.Request request> param;' #txt
Bk0 f10 requestMappingAction 'param.request=in.request;
' #txt
Bk0 f10 responseActionDecl 'einbuergerung_Gruppe6.Data out;
' #txt
Bk0 f10 responseMappingAction 'out=in;
out.request=result.request;
' #txt
Bk0 f10 windowConfiguration '* ' #txt
Bk0 f10 isAsynch false #txt
Bk0 f10 isInnerRd false #txt
Bk0 f10 userContext '* ' #txt
Bk0 f10 @C|.xml '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<elementInfo>
    <language>
        <name>Gesuchsunterlagen
downloaden</name>
        <nameStyle>28,7
</nameStyle>
    </language>
</elementInfo>
' #txt
Bk0 f10 344 226 144 44 -51 -16 #rect
Bk0 f10 @|RichDialogIcon #fIcon
Bk0 f0 expr out #txt
Bk0 f0 256 248 344 248 #arcP
Bk0 f3 expr out #txt
Bk0 f3 488 248 547 248 #arcP
>Proto Bk4 0 0 32 24 18 0 #rect
>Proto Bk4 @|BpmnSendTaskIcon #fIcon
En0 f13 out f7 tail #connect
En0 f9 head S21 g0 #connect
En0 f7 head S11 g0 #connect
En0 S11 g1 f9 tail #connect
En0 S41 g1 f5 tail #connect
En0 f5 head f2 in #connect
En0 S21 g1 f3 tail #connect
En0 f3 head S41 g0 #connect
En0 f17 out f8 tail #connect
En0 f8 head U10 g0 #connect
En0 f12 head S30 g0 #connect
En0 f0 mainOut f4 tail #connect
En0 f4 head f13 in #connect
En0 S30 g2 f11 tail #connect
En0 f11 head f17 in #connect
En0 f2 out f16 tail #connect
En0 f16 head f15 in #connect
En0 f2 out f12 tail #connect
En0 f15 out f6 tail #connect
En0 f6 head f1 mainIn #connect
En0 U10 g1 f10 tail #connect
En0 f10 head f15 in #connect
Bk2 f21 head f22 mainIn #connect
Bk2 f17 mainOut f23 tail #connect
Bk2 f23 head f15 in #connect
Bk2 f7 mainOut f10 tail #connect
Bk2 f10 head f15 in #connect
Bk2 g0 m f0 tail #connect
Bk2 f0 head f7 mainIn #connect
Bk2 f15 out f21 tail #connect
Bk2 f5 mainOut f4 tail #connect
Bk2 f4 head f20 mainIn #connect
Bk2 f20 mainOut f9 tail #connect
Bk2 f9 head f11 mainIn #connect
Bk2 f6 mainOut f3 tail #connect
Bk2 f3 head f5 mainIn #connect
Bk2 f13 head f6 mainIn #connect
Bk2 f14 head f17 mainIn #connect
Bk2 f22 mainOut f13 tail #connect
Bk2 f8 mainOut f14 tail #connect
Bk2 f15 out f1 tail #connect
Bk2 f1 head g1 m #connect
Bk2 f11 mainOut f2 tail #connect
Bk2 f2 head f8 mainIn #connect
Bk2 0 0 2104 376 0 #ivRect
Bk3 g0 m f0 tail #connect
Bk3 f0 head f27 mainIn #connect
Bk3 f1 head g1 m #connect
Bk3 f27 mainOut f1 tail #connect
Bk3 0 0 416 320 0 #ivRect
Bk5 g0 m f0 tail #connect
Bk5 f0 head f5 mainIn #connect
Bk5 f1 head g1 m #connect
Bk5 f11 mainOut f1 tail #connect
Bk5 f3 mainOut f2 tail #connect
Bk5 f2 head f11 mainIn #connect
Bk5 f5 mainOut f7 tail #connect
Bk5 f7 head f6 mainIn #connect
Bk5 f6 mainOut f10 tail #connect
Bk5 f10 head f9 in #connect
Bk5 f9 out f13 tail #connect
Bk5 f13 head f12 mainIn #connect
Bk5 f12 mainOut f15 tail #connect
Bk5 f15 head f14 mainIn #connect
Bk5 f14 mainOut f4 tail #connect
Bk5 f4 head f9 in #connect
Bk5 f18 mainOut f20 tail #connect
Bk5 f20 head f19 in #connect
Bk5 f19 out f21 tail #connect
Bk5 f21 head f17 mainIn #connect
Bk5 f17 mainOut f22 tail #connect
Bk5 f22 head f16 mainIn #connect
Bk5 f16 mainOut f23 tail #connect
Bk5 f23 head f19 in #connect
Bk5 f28 mainOut f29 tail #connect
Bk5 f29 head f25 in #connect
Bk5 f25 out f30 tail #connect
Bk5 f30 head f26 mainIn #connect
Bk5 f26 mainOut f31 tail #connect
Bk5 f31 head f27 mainIn #connect
Bk5 f27 mainOut f32 tail #connect
Bk5 f32 head f25 in #connect
Bk5 f19 out f33 tail #connect
Bk5 f33 head f28 mainIn #connect
Bk5 f25 out f34 tail #connect
Bk5 f34 head f3 mainIn #connect
Bk5 f9 out f24 tail #connect
Bk5 f24 head f18 mainIn #connect
Bk5 0 0 1336 560 0 #ivRect
Bk1 g0 m f2 tail #connect
Bk1 f2 head f1 mainIn #connect
Bk1 f1 mainOut f4 tail #connect
Bk1 f4 head f3 mainIn #connect
Bk1 f3 mainOut f0 tail #connect
Bk1 f0 head g2 m #connect
Bk1 0 0 808 400 0 #ivRect
Bk0 g0 m f2 tail #connect
Bk0 f2 head f1 mainIn #connect
Bk0 f1 mainOut f0 tail #connect
Bk0 f0 head f10 mainIn #connect
Bk0 f10 mainOut f3 tail #connect
Bk0 f3 head g1 m #connect
Bk0 0 0 640 512 0 #ivRect
